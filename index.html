<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–î–∏–∞–ª–æ–≥–æ–≤—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä | –ù–æ–≤–æ–≥–æ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ üéÑ</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à–∏ —Ñ–∞–π–ª—ã -->
    <link rel="stylesheet" href="style.css">
    <style>
        /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–µ —Å—Ç–∏–ª–∏ */
        .christmas-theme {
            color: #155d27;
        }
        
        .snowflake {
            position: fixed;
            color: white;
            font-size: 12px;
            z-index: 1000;
            pointer-events: none;
            animation: fall linear infinite;
        }
        
        @keyframes fall {
            to {
                transform: translateY(100vh);
            }
        }
    </style>
</head>
<body class="christmas-theme">
    <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏ —á–µ—Ä–µ–∑ JS -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // –°–æ–∑–¥–∞–µ–º —Å–Ω–µ–∂–∏–Ω–∫–∏
            for (let i = 0; i < 30; i++) {
                createSnowflake();
            }
            
            function createSnowflake() {
                const snowflake = document.createElement('div');
                snowflake.classList.add('snowflake');
                snowflake.innerHTML = '‚ùÑ';
                snowflake.style.left = Math.random() * 100 + 'vw';
                snowflake.style.animationDuration = Math.random() * 3 + 2 + 's';
                snowflake.style.opacity = Math.random() * 0.5 + 0.3;
                snowflake.style.fontSize = Math.random() * 10 + 10 + 'px';
                document.body.appendChild(snowflake);
                
                // –£–¥–∞–ª—è–µ–º —Å–Ω–µ–∂–∏–Ω–∫—É –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏
                setTimeout(() => {
                    snowflake.remove();
                    createSnowflake(); // –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é
                }, 5000);
            }
        });
    </script>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ -->
    <div class="modal" id="authModal">
        <div class="modal-content">
            <div class="result-icon">üéÑ</div>
            <h2 class="result-title">–î–∏–∞–ª–æ–≥–æ–≤—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä</h2>
            <p style="margin-bottom: 20px; color: #666; font-size: 14px;">–° –Ω–æ–≤—ã–º –≥–æ–¥–æ–º! üéÖ</p>
            
            <div id="loginForm">
                <div class="form-group">
                    <label>–ù–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" id="loginUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à –Ω–∏–∫–Ω–µ–π–º">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="loginPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <span class="password-toggle" onclick="togglePassword('loginPassword', this)">üëÅÔ∏è</span>
                    </div>
                    <div class="error-message" id="loginError"></div>
                </div>
                <button class="btn btn-primary btn-newyear" onclick="handleLogin()" style="width: 100%; margin-bottom: 10px;">
                    –í–æ–π—Ç–∏
                </button>
                <button class="btn btn-secondary" onclick="showRegisterForm()" style="width: 100%; margin-bottom: 10px;">
                    –°–æ–∑–¥–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç
                </button>
                <button class="btn btn-secondary" onclick="showResetPasswordForm()" style="width: 100%;">
                    –ó–∞–±—ã–ª–∏ –ø–∞—Ä–æ–ª—å?
                </button>
                <p style="text-align: center; margin: 15px 0; color: #666; font-size: 14px;">–∏–ª–∏</p>
                <button class="btn btn-secondary btn-newyear" onclick="showTrainerLogin()" style="width: 100%;">
                    üéì –í–æ–π—Ç–∏ –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä/–°–í
                </button>
            </div>
            
            <div id="registerForm" style="display: none;">
                 <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 10px 15px; border-radius: 8px; margin-bottom: 15px;">
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 5px;">
            <i class="fas fa-exclamation-triangle" style="color: #856404;"></i>
            <strong style="color: #856404; font-size: 13px;">–í–ù–ò–ú–ê–ù–ò–ï!</strong>
        </div>
        <p style="font-size: 12px; color: #856404; margin: 0;">
            <strong>–ó–∞–ø—Ä–µ—â–µ–Ω–æ:</strong> –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ —Ñ–∞–º–∏–ª–∏–∏, –º–∞—Ç–µ—Ä–Ω—ã–µ –∏–ª–∏ –æ—Å–∫–æ—Ä–±–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞ –≤ –Ω–∏–∫–Ω–µ–π–º–µ.<br>
            <strong>–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º:</strong> –û–ø–µ—Ä–∞—Ç–æ—Ä_1, –°–ø–µ—Ü_–ò–≤–∞–Ω, –ê–≥–µ–Ω—Ç_007
        </p>
    </div>
    
    <!-- –î–∞–ª—å—à–µ –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—è –∫–∞–∫ –µ—Å—Ç—å -->
                <div class="form-group">
                    <label>–ù–∏–∫–Ω–µ–π–º (–±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤ —Å–∏—Å—Ç–µ–º–µ):</label>
                    <input type="text" id="registerUsername" placeholder="–ü—Ä–∏–¥—É–º–∞–π—Ç–µ –Ω–∏–∫–Ω–µ–π–º (–æ—Ç 3 —Å–∏–º–≤–æ–ª–æ–≤)">
                </div>
                <div class="form-group">
                    <label>–í–µ—Ä—Ç–∏–∫–∞–ª—å (–æ—Ç–¥–µ–ª):</label>
                    <select id="registerGroup" required>
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à—É –≤–µ—Ä—Ç–∏–∫–∞–ª—å</option>
                        <option value="–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏">–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ª–æ—è–ª—å–Ω–æ—Å—Ç–∏</option>
                        <option value="–û–ü–ö">–û–ü–ö</option>
                        <option value="–§—É–¥—Ç–µ—Ö">–§—É–¥—Ç–µ—Ö</option>
                        <option value="–ú–∞—Ä–∫–µ—Ç">–ú–∞—Ä–∫–µ—Ç</option>
                        <option value="–ê–ø—Ç–µ–∫–∞">–ê–ø—Ç–µ–∫–∞</option>
                        <option value="–°–±–æ—Ä–∫–∞">–°–±–æ—Ä–∫–∞</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="registerPassword" placeholder="–ü–∞—Ä–æ–ª—å (–æ—Ç 6 —Å–∏–º–≤–æ–ª–æ–≤)">
                        <span class="password-toggle" onclick="togglePassword('registerPassword', this)">üëÅÔ∏è</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="registerPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <span class="password-toggle" onclick="togglePassword('registerPasswordConfirm', this)">üëÅÔ∏è</span>
                    </div>
                    <div class="error-message" id="passwordMatchError"></div>
                </div>
                
                <div class="confidentiality-warning">
                    <h4><i class="fas fa-exclamation-triangle"></i> –í–ù–ò–ú–ê–ù–ò–ï: –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö</h4>
                    <div class="confidentiality-list">
                        <div class="prohibited">
                            <strong>–ó–ê–ü–†–ï–©–ï–ù–û:</strong>
                            <ul style="margin: 5px 0 0 15px; padding: 0;">
                                <li>–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∫–æ–º–ø–∞–Ω–∏–∏</li>
                                <li>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–æ–≤</li>
                                <li>–ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –∏ –ø–∞—Å–ø–æ—Ä—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
                            </ul>
                        </div>
                        <div class="recommended">
                            <strong>–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò:</strong>
                            <ul style="margin: 5px 0 0 15px; padding: 0;">
                                <li>–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤—ã–º—ã—à–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</li>
                                <li>–ù–µ —É–∫–∞–∑—ã–≤–∞–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –Ω–æ–º–µ—Ä–∞</li>
                                <li>–°–æ—Ö—Ä–∞–Ω—è–π—Ç–µ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—å</li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-primary btn-newyear" onclick="handleRegister()" style="width: 100%; margin-bottom: 10px;">
                    –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è
                </button>
                <button class="btn btn-secondary" onclick="showLoginForm()" style="width: 100%;">
                    –ù–∞–∑–∞–¥ –∫–æ –≤—Ö–æ–¥—É
                </button>
            </div>

            <div id="resetPasswordForm" style="display: none;">
                <div class="form-group">
                    <label>–ù–∏–∫–Ω–µ–π–º:</label>
                    <input type="text" id="resetUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∫–Ω–µ–π–º">
                </div>
                <div class="form-group">
                    <label>–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="resetNewPassword" placeholder="–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å (–æ—Ç 6 —Å–∏–º–≤–æ–ª–æ–≤)">
                        <span class="password-toggle" onclick="togglePassword('resetNewPassword', this)">üëÅÔ∏è</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="resetPasswordConfirm" placeholder="–ü–æ–≤—Ç–æ—Ä–∏—Ç–µ –ø–∞—Ä–æ–ª—å">
                        <span class="password-toggle" onclick="togglePassword('resetPasswordConfirm', this)">üëÅÔ∏è</span>
                    </div>
                    <div class="error-message" id="resetPasswordError"></div>
                </div>
                <button class="btn btn-primary btn-newyear" onclick="handleResetPassword()" style="width: 100%; margin-bottom: 10px;">
                    –°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å
                </button>
                <button class="btn btn-secondary" onclick="showLoginForm()" style="width: 100%;">
                    –ù–∞–∑–∞–¥ –∫–æ –≤—Ö–æ–¥—É
                </button>
            </div>

            <!-- –§–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ —Ç—Ä–µ–Ω–µ—Ä–∞ -->
            <div id="trainerLoginForm" style="display: none;">
                <div class="result-icon">üéÖ</div>
                <h2 class="result-title">–†–µ–∂–∏–º —Ç—Ä–µ–Ω–µ—Ä–∞</h2>
                <p style="margin-bottom: 20px; color: #666; font-size: 14px;">–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ üéÅ</p>
                
                <div class="form-group">
                    <label>–õ–æ–≥–∏–Ω —Ç—Ä–µ–Ω–µ—Ä–∞:</label>
                    <input type="text" id="trainerUsername" placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω —Ç—Ä–µ–Ω–µ—Ä–∞">
                </div>
                <div class="form-group">
                    <label>–ü–∞—Ä–æ–ª—å:</label>
                    <div class="password-container">
                        <input type="password" id="trainerPassword" placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å —Ç—Ä–µ–Ω–µ—Ä–∞">
                        <span class="password-toggle" onclick="togglePassword('trainerPassword', this)">üëÅÔ∏è</span>
                    </div>
                    <div class="error-message" id="trainerLoginError"></div>
                </div>
                
                <button class="btn btn-primary btn-newyear" onclick="handleTrainerLogin()" style="width: 100%; margin-bottom: 10px;">
                    –í–æ–π—Ç–∏ –∫–∞–∫ —Ç—Ä–µ–Ω–µ—Ä/–°–í
                </button>
                <button class="btn btn-secondary" onclick="showLoginForm()" style="width: 100%;">
                    –ù–∞–∑–∞–¥ –∫ –æ–±—ã—á–Ω–æ–º—É –≤—Ö–æ–¥—É
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —á–∞—Ç–∞ -->
    <div class="modal chat-modal" id="chatModal">
        <div class="modal-content">
            <div class="chat-modal-header">
                <h3 id="chatModalTitle">–î–∏–∞–ª–æ–≥ —Å –∫–ª–∏–µ–Ω—Ç–æ–º</h3>
                <div class="chat-modal-info">
                    <div>
                        <strong>–¢–∏–ø –∫–ª–∏–µ–Ω—Ç–∞:</strong> <span id="chatModalClientType">-</span>
                    </div>
                    <div>
                        <strong>–î–∞—Ç–∞:</strong> <span id="chatModalDate">  </span>
                    </div>
                    <div>
                        <strong>–û—Ü–µ–Ω–∫–∞:</strong> <span id="chatModalScore">-</span>/5
                    </div>
                </div>
            </div>
            
            <div class="chat-modal-messages" id="chatModalMessages">
                <!-- –°–æ–æ–±—â–µ–Ω–∏—è —á–∞—Ç–∞ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å—é–¥–∞ -->
            </div>
            
            <div class="chat-modal-footer">
                <div class="storage-info">
                    <i class="fas fa-info-circle"></i> –ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–æ–≤ —Ö—Ä–∞–Ω–∏—Ç—Å—è 30 –¥–Ω–µ–π
                </div>
                <button class="btn btn-secondary" onclick="closeChatModal()">
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
    <div class="modal" id="resultModal">
        <div class="modal-content">
            <div class="result-icon" id="resultIcon">üéÅ</div>
            <div class="result-title" id="resultTitle">–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!</div>
            <div class="result-xp" id="resultXP">+0 XP</div>
            <div id="resultDetails" style="text-align: left; margin: 15px 0; padding: 15px; background: #f8f9fa; border-radius: 8px; font-size: 13px;">
                <!-- –î–µ—Ç–∞–ª–∏ –æ—Ü–µ–Ω–∫–∏ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
            
            <div id="aiFeedbackContainer" style="display: none;">
                <div class="ai-feedback-section">
                    <div class="ai-feedback-title">
                        <i class="fas fa-robot"></i>
                        <span>–ü–æ–ª–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç DeepSeek</span>
                    </div>
                    <div class="ai-feedback-content" id="aiFeedbackContent">
                        <!-- –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –æ—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –±—É–¥–µ—Ç –∑–¥–µ—Å—å -->
                    </div>
                </div>
            </div>
            
            <button class="btn btn-primary btn-newyear" onclick="closeResultModal()" style="margin-top: 10px; width: 100%;">
                –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å
            </button>
        </div>
    </div>

    <div class="container" id="mainContainer" style="display: none;">
        <div class="header">
            <div class="user-panel" id="userPanel">
                <div class="user-info">
                    <span id="currentUserName"></span>
                    <span class="group-badge" id="userGroupBadge"></span>
                </div>
                <button class="logout-btn btn-newyear" onclick="logout()">–í—ã–π—Ç–∏</button>
            </div>
            
            <h1>üéÑ –î–∏–∞–ª–æ–≥–æ–≤—ã–π —Ç—Ä–µ–Ω–∞–∂–µ—Ä</h1>
            <p id="headerSubtitle">–ù–æ–≤–æ–≥–æ–¥–Ω—è—è —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Ä–∞–±–æ—Ç—ã —Å –∫–ª–∏–µ–Ω—Ç–∞–º–∏ üéÖ</p>
        </div>

        <div class="content">
            <!-- –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
            <div class="sidebar" id="sidebar">
                <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ -->
            </div>

            <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
            <div class="main-content">
                <!-- –í–∫–ª–∞–¥–∫–∏ –±—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–æ–ª–∏ -->
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è —Ç—Ä–µ–Ω–µ—Ä–∞ -->
    <div class="modal" id="commentModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="result-icon">üí¨</div>
            <h2 class="result-title" id="commentModalTitle">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π —Ç—Ä–µ–Ω–µ—Ä–∞</h2>
            <div id="commentModalStudentInfo" style="margin-bottom: 15px; padding: 10px; background: #f8f9fa; border-radius: 8px;"></div>
            
            <div class="form-group">
                <label>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</label>
                <textarea class="comment-input" id="commentText" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –∫ –¥–∏–∞–ª–æ–≥—É..."></textarea>
            </div>
            
            <div id="existingComments" style="margin-bottom: 15px;"></div>
            
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-primary btn-newyear" onclick="submitComment()" style="flex: 1;">
                    –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π
                </button>
                <button class="btn btn-secondary" onclick="closeCommentModal()" style="flex: 1;">
                    –ó–∞–∫—Ä—ã—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –Ω–∞—à JS —Ñ–∞–π–ª -->
    <script src="app.js"></script>
</body>
</html>
